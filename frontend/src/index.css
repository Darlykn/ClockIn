@font-face {
  font-family: 'Inter';
  font-display: optional;
  src: local('Inter');
}

*, *::before, *::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: var(--bg-page);
}

/* ═══════════════════════════════════════════════════
   Design Tokens — 4-Layer System
   ═══════════════════════════════════════════════════ */

/* ─── Layer 1: Neutral Base (Light) ─── */
:root,
[data-mantine-color-scheme="light"] {
  --bg-page:        #F7F9FB;
  --bg-sidebar:     #f0f2f6;
  --bg-card:        #FFFFFF;
  --bg-card-hover:  #F5F5F5;
  --bg-elevated:    #FFFFFF;
  --bg-inset:       #F0F2F5;
  --bg-overlay:     rgba(0, 0, 0, 0.45);
  --border-subtle:  #E2E2E2;
  --border-strong:  #D4D4D4;
  --border-focus:   #C82339;
  --text-primary:   #1C1C1E;
  --text-default:   #2C2C2E;
  --text-muted:     #6B6B6F;
  --text-faint:     #9CA3AF;

  /* Layer 2: Brand Accent */
  --primary-50:  #FEF2F3;
  --primary-100: #FCECED;
  --primary-400: #E45A6A;
  --primary-500: #C82339;
  --primary-600: #A81E30;
  --primary-700: #8C1928;

  /* Layer 3: Semantics */
  --success-50:  #F0FDF4;
  --success-500: #22C55E;
  --success-600: #16A34A;
  --warning-50:  #FFFBEB;
  --warning-500: #F59E0B;
  --warning-600: #D97706;
  --error-50:    #FEF2F2;
  --error-500:   #C82339;
  --error-600:   #A81E30;
  --info-50:     #EFF6FF;
  --info-500:    #0EA5E9;
  --info-600:    #0284C7;

  /* Layer 4: Elevation & Motion */
  --shadow-xs:         0 1px 2px rgba(0,0,0,0.04);
  --shadow-sm:         0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md:         0 4px 6px rgba(0,0,0,0.06), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg:         0 10px 24px rgba(0,0,0,0.10), 0 4px 8px rgba(0,0,0,0.06);
  --shadow-card:       0 2px 8px rgba(0,0,0,0.07), 0 1px 3px rgba(0,0,0,0.04);
  --shadow-card-hover: 0 4px 16px rgba(0,0,0,0.10), 0 2px 6px rgba(0,0,0,0.06);
  --transition-fast:   150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow:   300ms ease;

  /* Chart OKLCH-equivalent palette */
  --chart-1: #3B82F6;
  --chart-2: #22C55E;
  --chart-3: #F59E0B;
  --chart-4: #EF4444;
  --chart-5: #8B5CF6;
  --chart-6: #06B6D4;
}

/* ─── Dark Mode — Neutral Gray Scale + Red Accent ─── */
[data-mantine-color-scheme="dark"] {
  --bg-page:        #0A0A0A;
  --bg-sidebar:     #111111;
  --bg-card:        #1A1A1A;
  --bg-card-hover:  #242424;
  --bg-elevated:    #222222;
  --bg-inset:       #141414;
  --bg-overlay:     rgba(0, 0, 0, 0.65);
  --border-subtle:  #2A2A2A;
  --border-strong:  #444444;
  --border-focus:   #E45A6A;
  --text-primary:   #F5F5F5;
  --text-default:   #E0E0E0;
  --text-muted:     #999999;
  --text-faint:     #666666;

  /* Brand accent — brightened for dark bg */
  --primary-50:  rgba(200, 35, 57, 0.10);
  --primary-100: rgba(200, 35, 57, 0.18);
  --primary-400: #F06D7D;
  --primary-500: #E45A6A;
  --primary-600: #C82339;
  --primary-700: #A81E30;

  /* Neutral/desaturated semantics for dark */
  --success-50:  rgba(255, 255, 255, 0.04);
  --success-500: #A0A0A0;
  --success-600: #888888;
  --warning-50:  rgba(255, 255, 255, 0.04);
  --warning-500: #BFBFBF;
  --warning-600: #A0A0A0;
  --error-50:    rgba(200, 35, 57, 0.08);
  --error-500:   #F06D7D;
  --error-600:   #E45A6A;
  --info-50:     rgba(255, 255, 255, 0.04);
  --info-500:    #B0B0B0;
  --info-600:    #999999;

  /* Shadows */
  --shadow-xs:         0 1px 2px rgba(0,0,0,0.30);
  --shadow-sm:         0 1px 4px rgba(0,0,0,0.34), 0 1px 2px rgba(0,0,0,0.22);
  --shadow-md:         0 4px 8px rgba(0,0,0,0.38), 0 2px 4px rgba(0,0,0,0.26);
  --shadow-lg:         0 10px 32px rgba(0,0,0,0.44), 0 4px 12px rgba(0,0,0,0.30);
  --shadow-card:       0 1px 4px rgba(0,0,0,0.30), 0 1px 2px rgba(0,0,0,0.20);
  --shadow-card-hover: 0 4px 16px rgba(0,0,0,0.40), 0 2px 6px rgba(0,0,0,0.26);
  --transition-fast:   150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow:   300ms ease;

  /* Chart palette (same for both themes) */
  --chart-1: #3B82F6;
  --chart-2: #22C55E;
  --chart-3: #F59E0B;
  --chart-4: #EF4444;
  --chart-5: #8B5CF6;
  --chart-6: #06B6D4;
}

/* ─── Sidebar nav hover ─── */
.mantine-NavLink-root:not([data-active]):hover {
  background: var(--bg-card-hover) !important;
}

/* ─── Cards — token-based shadows ─── */
.mantine-Paper-root {
  background-color: var(--bg-card) !important;
  box-shadow: var(--shadow-card) !important;
  transition: box-shadow var(--transition-normal), transform var(--transition-normal);
}

.mantine-Paper-root:hover {
  box-shadow: var(--shadow-card-hover) !important;
}

/* ─── Scrollbar styling ─── */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--border-strong);
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: var(--text-faint);
}

/* ─── Focus ring ─── */
:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 2px;
}

/* ─── Table thead ─── */
.mantine-Table-thead {
  background: var(--bg-inset);
}

/* ─── Page enter animation ─── */
@keyframes pageEnter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.mantine-AppShell-main > * {
  animation: pageEnter 0.25s ease-out;
}

/* ─── Мобильный сайдбар ─── */
@media (max-width: 767px) {
  .mantine-AppShell-navbar {
    width: 220px !important;
    max-width: 220px !important;
  }
}

/* ─── Recharts / Charts: убираем outline и выделение ─── */
.recharts-responsive-container,
.recharts-responsive-container *,
.recharts-wrapper,
.recharts-wrapper * {
  outline: none !important;
}
.recharts-responsive-container:focus,
.recharts-responsive-container *:focus,
.recharts-responsive-container *:focus-visible,
.recharts-wrapper:focus,
.recharts-wrapper *:focus,
.recharts-wrapper *:focus-visible {
  outline: none !important;
}
.recharts-responsive-container,
.recharts-wrapper {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

svg[role="application"],
svg[role="application"]:focus,
svg[role="application"]:focus-visible,
svg[tabindex]:focus,
svg[tabindex]:focus-visible {
  outline: none !important;
  outline-style: none !important;
}

.recharts-wrapper svg *,
.recharts-wrapper svg *:focus,
.recharts-wrapper svg *:focus-visible {
  outline: 0 !important;
  outline-style: none !important;
}

.chart-no-selection,
.chart-no-selection * {
  outline: none !important;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}
.chart-no-selection:focus,
.chart-no-selection *:focus,
.chart-no-selection *:focus-visible {
  outline: none !important;
  outline-style: none !important;
}
